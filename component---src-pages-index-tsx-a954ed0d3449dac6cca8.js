"use strict";(self.webpackChunkmergist=self.webpackChunkmergist||[]).push([[245],{9131:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ce}});var r=n(6540),i=n(2738),s=n(7424),o=n(6188),l=n(8153),a=n(4848);function c(e){let{className:t="",children:n,onFilesAdded:r}=e;return(0,a.jsxs)("label",{className:`cursor-pointer ${t}`,children:[(0,a.jsx)("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(e){(0,s.Al)(e);const t=e.target.files;t&&t.length>0&&r(t)},multiple:!0}),n]})}function d(e){return(0,a.jsx)(c,{className:"flex-col flex-1",onFilesAdded:e.onFilesAdded,children:(0,a.jsxs)("div",{className:"z-20 flex-col flex-1 gap-8 justify-center items-center p-8 m-8 text-center rounded-lg border-2 border-dashed transition-colors bg-base-100 hover:bg-base-200",children:[(0,a.jsx)(l.I,{icon:o.OXM,className:"fa-3x"}),(0,a.jsx)("p",{className:"flex-grow-0",children:"Drag and drop PDF files here, or click to select files"})]})})}function u(e){const{0:t,1:n}=(0,r.useState)(!1),i=(0,r.useRef)(0),o=(0,r.useCallback)((e=>{(0,s.Al)(e)}),[]),l=(0,r.useCallback)((e=>{(0,s.Al)(e),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n(!0)}),[]),c=(0,r.useCallback)((e=>{(0,s.Al)(e),i.current--,i.current>0||n(!1)}),[]),d=(0,r.useCallback)((t=>{(0,s.Al)(t),n(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(i.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,r.useEffect)((()=>(window.addEventListener("dragenter",l),window.addEventListener("dragleave",c),window.addEventListener("dragover",o),window.addEventListener("drop",d),()=>{window.removeEventListener("dragenter",l),window.removeEventListener("dragleave",c),window.removeEventListener("dragover",o),window.removeEventListener("drop",d)}))),(0,a.jsx)("div",{className:"fixed inset-0 flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(t?"":"hidden")})}var f=n(9473),h=n(8601),m=n(5128),p=n(6719),g=n(6995),x=n(5446);function b(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function v(...e){return r.useCallback(function(...e){return t=>{let n=!1;const r=e.map((e=>{const r=b(e,t);return n||"function"!=typeof r||(n=!0),r}));if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():b(e[t],null)}}}}(...e),e)}class j extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=(0,g.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y({children:e,isPresent:t,anchorX:n,root:i}){const s=(0,r.useId)(),o=(0,r.useRef)(null),l=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,r.useContext)(x.Q),d=v(o,e?.ref);return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:a,left:d,right:u}=l.current;if(t||!o.current||!e||!r)return;const f="left"===n?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=s;const h=document.createElement("style");c&&(h.nonce=c);const m=i??document.head;return m.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            ${f}px !important;\n            top: ${a}px !important;\n          }\n        `),()=>{m.contains(h)&&m.removeChild(h)}}),[t]),(0,a.jsx)(j,{isPresent:t,childRef:o,sizeRef:l,children:r.cloneElement(e,{ref:d})})}const w=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,root:d})=>{const u=(0,h.M)(N),f=(0,r.useId)();let m=!0,g=(0,r.useMemo)((()=>(m=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))})),[n,u,i]);return o&&m&&(g={...g}),(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[n]),r.useEffect((()=>{!n&&!u.size&&i&&i()}),[n]),"popLayout"===l&&(e=(0,a.jsx)(y,{isPresent:n,anchorX:c,root:d,children:e})),(0,a.jsx)(p.t.Provider,{value:g,children:e})};function N(){return new Map}var E=n(9120);const M=e=>e.key||"";function C(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}const k=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[u,p]=(0,E.xQ)(l),g=(0,r.useMemo)((()=>C(e)),[e]),x=l&&!u?[]:g.map(M),b=(0,r.useRef)(!0),v=(0,r.useRef)(g),j=(0,h.M)((()=>new Map)),[y,N]=(0,r.useState)(g),[k,A]=(0,r.useState)(g);(0,m.E)((()=>{b.current=!1,v.current=g;for(let e=0;e<k.length;e++){const t=M(k[e]);x.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}}),[k,x.length,x.join("-")]);const F=[];if(g!==y){let e=[...g];for(let t=0;t<k.length;t++){const n=k[t],r=M(n);x.includes(r)||(e.splice(t,0,n),F.push(n))}return"wait"===o&&F.length&&(e=F),A(C(e)),N(g),null}const{forceRender:R}=(0,r.useContext)(f.L);return(0,a.jsx)(a.Fragment,{children:k.map((e=>{const r=M(e),f=!(l&&!u)&&(g===k||x.includes(r));return(0,a.jsx)(w,{isPresent:f,initial:!(b.current&&!n)&&void 0,custom:t,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:f?void 0:()=>{if(!j.has(r))return;j.set(r,!0);let e=!0;j.forEach((t=>{t||(e=!1)})),e&&(R?.(),A(v.current),l&&p?.(),i&&i())},anchorX:c,children:e},r)}))})};var A=n(5936),F=n(7383);const R={[F.P.Success]:{class:"alert-success",icon:o.Dnq},[F.P.Warning]:{class:"alert-warning",icon:o.JAe},[F.P.Error]:{class:"alert-error",icon:o.lEd}};function S(e){const t=e.statusMsg.getSeverity,{0:n,1:i}=(0,r.useState)(!0),o={initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1,scaleY:1},hidden:{opacity:0,scaleY:0}},...(0,s.xl)()};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e)}}),[]),(0,a.jsx)(k,{children:n&&(0,a.jsxs)(A.P.div,{layout:!0,className:`alert shadow ${R[t].class}`,...o,children:[(0,a.jsx)(l.I,{icon:R[t].icon,className:"mr-2 fa-lg"}),(0,a.jsx)("span",{children:e.statusMsg.getMsg})]},e.statusMsg.getId)})}function I(e){let{className:t="",disabled:n=!1,onClick:r,children:i}=e;return(0,a.jsx)("button",{type:"button",className:`gap-2 btn-block ${t}`,disabled:n,onClick:r,children:i})}function P(e){const t={initial:{width:0},animate:{width:e.progress},transition:{type:"inertia",power:1,timeConstant:1e3,velocity:100}};return(0,a.jsx)("div",{className:"w-full h-1",children:(0,a.jsx)(A.P.div,{role:"progressbar",className:"h-full rounded-full bg-primary-content",...t})})}function B(e){const t=(0,a.jsxs)(I,{className:"btn-primary",disabled:e.disabled,onClick:e.onClick,children:[(0,a.jsx)(l.I,{icon:o.qIE}),"Merge Files"]});return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:e.disabled&&(0,a.jsx)("div",{className:"tooltip tooltip-warning","data-tip":"Please add more files to merge",children:t})||t})}function $(e){const t=e.progress>=1,n=`${(100*e.progress).toFixed(0)}%`,r=t?(0,a.jsx)("span",{className:"loading"}):n;return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:(0,a.jsxs)(I,{className:"overflow-hidden flex-col justify-end p-0 border-0 btn-primary",disabled:!0,children:[r,(0,a.jsx)(P,{progress:n})]})})}function T(e){return(0,a.jsx)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:"merged.pdf",className:"w-full",children:(0,a.jsxs)(I,{className:"btn-accent",children:[(0,a.jsx)(l.I,{icon:o.XYS}),"Download"]})})}function L(e){return e.downloadUrl?(0,a.jsx)(T,{downloadUrl:e.downloadUrl}):e.progress>0?(0,a.jsx)($,{progress:e.progress}):(0,a.jsx)(B,{onClick:e.onClick,disabled:e.numOfFiles<2})}var D=n(712),U=n(1711),z=n(9495),G=n(8104);const O=(0,r.createContext)(null);var X=n(4766);function Y(e){const t=(0,h.M)((()=>(0,X.OQ)(e))),{isStatic:n}=(0,r.useContext)(x.Q);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)((()=>t.on("change",n)),[])}return t}var W=n(5219);var Q=n(1207);function Z(e,t){const n=Y(t()),r=()=>n.set(t());return r(),(0,m.E)((()=>{const t=()=>Q.Gt.preRender(r,!1,!0),n=e.map((e=>e.on("change",t)));return()=>{n.forEach((e=>e())),(0,Q.WG)(r)}})),n}function q(e,t,n,r){if("function"==typeof e)return function(e){X.bt.current=[],e();const t=Z(X.bt.current,e);return X.bt.current=void 0,t}(e);const i="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],i=e[1+n],s=e[2+n],o=e[3+n],l=(0,W.G)(i,s,o);return t?l(r):l}(t,n,r);return Array.isArray(e)?V(e,i):V([e],(([e])=>i(e)))}function V(e,t){const n=(0,h.M)((()=>[]));return Z(e,(()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)}))}function J(e,t=0){return(0,z.S)(e)?e:Y(t)}function K({children:e,style:t={},value:n,as:i="li",onDrag:s,layout:o=!0,...l},c){const d=(0,h.M)((()=>A.P[i])),u=(0,r.useContext)(O),f={x:J(t.x),y:J(t.y)},m=q([f.x,f.y],(([e,t])=>e||t?1:"unset"));(0,G.V)(Boolean(u),"Reorder.Item must be a child of Reorder.Group","reorder-item-child");const{axis:p,registerItem:g,updateOrder:x}=u;return(0,a.jsx)(d,{drag:p,...l,dragSnapToOrigin:!0,style:{...t,x:f.x,y:f.y,zIndex:m},layout:o,onDrag:(e,t)=>{const{velocity:r}=t;r[p]&&x(n,f[p].get(),r[p]),s&&s(e,t)},onLayoutMeasure:e=>g(n,e),ref:c,ignoreStrict:!0,children:e})}const _=(0,r.forwardRef)(K);var H=n(5744),ee=n(2192);function te({children:e,as:t="ul",axis:n="y",onReorder:i,values:s,...o},l){const c=(0,h.M)((()=>A.P[t])),d=[],u=(0,r.useRef)(!1);(0,G.V)(Boolean(s),"Reorder.Group must be provided a values prop","reorder-values");const f={axis:n,registerItem:(e,t)=>{const r=d.findIndex((t=>e===t.value));-1!==r?d[r].layout=t[n]:d.push({value:e,layout:t[n]}),d.sort(ie)},updateOrder:(e,t,n)=>{if(u.current)return;const r=function(e,t,n,r){if(!r)return e;const i=e.findIndex((e=>e.value===t));if(-1===i)return e;const s=r>0?1:-1,o=e[i+s];if(!o)return e;const l=e[i],a=o.layout,c=(0,H.k)(a.min,a.max,.5);return 1===s&&l.layout.max+n>c||-1===s&&l.layout.min+n<c?(0,ee.Pe)(e,i,i+s):e}(d,e,t,n);d!==r&&(u.current=!0,i(r.map(re).filter((e=>-1!==s.indexOf(e)))))}};return(0,r.useEffect)((()=>{u.current=!1})),(0,a.jsx)(c,{...o,ref:l,ignoreStrict:!0,children:(0,a.jsx)(O.Provider,{value:f,children:e})})}const ne=(0,r.forwardRef)(te);function re(e){return e.value}function ie(e,t){return e.layout.min-t.layout.min}const se=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],oe=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],le=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ae=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],ce=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r},de=e=>{if("number"==typeof e)return Math.log10(e);const t=e.toString(10);return t.length+Math.log10(`0.${t.slice(0,15)}`)},ue=e=>"number"==typeof e?Math.log(e):de(e)*Math.log(10),fe=(e,t)=>{if("number"==typeof e)return e/t;const n=e/BigInt(t),r=e%BigInt(t);return Number(n)+Number(r)/t},he=(e,t)=>{if(void 0===t)return e;if("number"!=typeof t||!Number.isSafeInteger(t)||t<0)throw new TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof t}: ${t}`);return 0===t?e:e.length<t?e.padStart(t," "):e},me=e=>{const{minimumFractionDigits:t,maximumFractionDigits:n}=e;if(void 0!==t||void 0!==n)return{...void 0!==t&&{minimumFractionDigits:t},...void 0!==n&&{maximumFractionDigits:n},roundingMode:"trunc"}};function pe(e,t){if("bigint"!=typeof e&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...t}).bits?t.binary?ae:le:t.binary?oe:se,r=t.space?t.nonBreakingSpace?"Â ":" ":"",i="number"==typeof e?0===e:0n===e;if(t.signed&&i){const e=` 0${r}${n[0]}`;return he(e,t.fixedWidth)}const s=e<0,o=s?"-":t.signed?"+":"";s&&(e=-e);const l=me(t);let a;if(e<1){a=o+ce(e,t.locale,l)+r+n[0]}else{const i=Math.min(Math.floor(t.binary?ue(e)/Math.log(1024):de(e)/3),n.length-1);if(e=fe(e,(t.binary?1024:1e3)**i),!l){const t=Math.max(3,Math.floor(e).toString().length);e=e.toPrecision(t)}a=o+ce(Number(e),t.locale,l)+r+n[i]}return he(a,t.fixedWidth)}var ge=n(3089);function xe(e){return(0,a.jsx)("button",{type:"button",className:"btn-ghost sm:btn-square",onClick:e.onClick,children:(0,a.jsx)(l.I,{icon:e.icon,className:"fa-lg"})})}function be(e){const t="bg-base-100 shadow-md flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),n={initial:{scale:0},animate:{scale:1},exit:{scale:0},...(0,s.xl)()};return(0,a.jsxs)(_,{value:e.id,className:t,...n,children:[(0,a.jsxs)("div",{className:"overflow-hidden flex-row gap-0 items-center sm:gap-2",children:[(0,a.jsx)(xe,{icon:o.S9g}),(0,a.jsx)("p",{className:"overflow-hidden font-bold whitespace-nowrap text-ellipsis",children:e.name})]}),(0,a.jsxs)("div",{className:"overflow-hidden flex-row flex-none gap-0 items-center sm:gap-2",children:[(0,a.jsxs)("p",{className:"whitespace-nowrap",children:["(",pe(e.size,{maximumFractionDigits:0}),")"]}),(0,a.jsx)("div",{className:"justify-end card-actions",children:(0,a.jsx)(xe,{icon:o.Jyw,onClick:()=>e.onRemove(e.id)})})]})]},e.id)}function ve(e){return(0,a.jsx)(ne,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"overflow-hidden flex-col gap-5 px-6 py-7 shadow-inner bg-base-300",children:(0,a.jsx)(k,{children:e.fileIds.map((t=>(0,a.jsx)(be,{id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled},t)))})})}function je(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-col gap-4 justify-between items-center p-6 text-lg font-medium sm:flex-row sm:pl-10",children:[(0,a.jsxs)("h2",{children:[e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",pe(Object.values(e.files).reduce(((e,t)=>e+t.getSize),0)),")"]}),(0,a.jsxs)("div",{className:"flex-row flex-1 gap-2 sm:flex-none",children:[(0,a.jsx)(c,{onFilesAdded:e.onFileAdded,children:(0,a.jsx)(ge.j,{icon:o.OXM,fake:!0,children:"Add File"})}),(0,a.jsx)(ge.j,{icon:o.yLS,onClick:e.onAllFilesRemoved,children:"Remove All"})]})]}),(0,a.jsx)("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled?s.Al:void 0,onKeyUp:e.disabled?s.Al:void 0,className:"overflow-hidden",children:(0,a.jsx)(ve,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})})]})}function ye(e){let{className:t="",visible:n=!0,children:r}=e;return(0,a.jsx)("section",{className:`flex-col justify-center w-full h-full ${n?"":"hidden overflow-hidden "}${t}`,children:r})}var we=n(8890);function Ne(e){return(0,a.jsx)("main",{className:"flex-col flex-1 w-full h-full",children:(0,a.jsx)(we.j,{className:"flex-1 sm:w-5/6",collapse:!0,children:e.children})})}var Ee=n(3772);const Me=(0,s._G)(i.A);function Ce(){const{0:e,1:t}=(0,r.useState)([]),{0:n,1:i}=(0,r.useState)({}),{0:o,1:l}=(0,r.useState)([]),{0:c,1:f}=(0,r.useState)(""),{0:h,1:m}=(0,r.useState)(0),p=new s.gT(Me.shortTitle,Me.siteUrl);function g(e,n){void 0===n&&(n=null),p.removeMergedFile(c),n&&i(n),t(e),m(0),f("")}const x=(0,r.useCallback)((t=>{const[r,i]=p.filterInvalidFiles(n,Array.from(t));if(r.length>0){const t=n,i=[];for(const e of r)i.push(e.id),t[e.id]=e;g(e.concat(i),t)}i.length>0&&l(i)}),[e,n]);return(0,a.jsxs)(Ee.M,{metadata:Me,children:[(0,a.jsx)(U.Y,{title:Me.shortTitle,children:Me.description}),(0,a.jsxs)(Ne,{children:[(0,a.jsx)(u,{onFilesAdded:x}),(0,a.jsx)(ye,{visible:o.length>0,className:"gap-5",children:o.map((e=>(0,a.jsx)(S,{statusMsg:e},e.getId)))}),(0,a.jsx)(ye,{visible:0===e.length,className:"flex-1 rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(d,{onFilesAdded:x})}),(0,a.jsx)(ye,{visible:e.length>0,className:"rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(je,{fileIds:e,files:n,onReorder:function(e){g(e)},onFileAdded:x,onFileRemoved:function(t){const r=n,i=e.filter((e=>e!==t));delete r[t],g(i,r)},onAllFilesRemoved:function(){g([],{})},disabled:h>0})}),(0,a.jsx)(ye,{visible:e.length>0,className:"px-6 sm:px-0",children:(0,a.jsx)(L,{numOfFiles:e.length,progress:h,downloadUrl:c,onClick:async function(){const[t,r]=await p.createMergedFile(n,e,m);""===t&&f(""),f(t),l(r),m(0)}})})]}),(0,a.jsx)(D.w,{author:Me.author,githubUrl:Me.githubUrl,homepageDomain:Me.homepageDomain})]})}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-a954ed0d3449dac6cca8.js.map